"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/writings/[writeupId]/route";
exports.ids = ["app/api/writings/[writeupId]/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "../../client/components/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/client/components/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/action-async-storage.external.js");

/***/ }),

/***/ "../../client/components/request-async-storage.external":
/*!********************************************************************************!*\
  !*** external "next/dist/client/components/request-async-storage.external.js" ***!
  \********************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/request-async-storage.external.js");

/***/ }),

/***/ "../../client/components/static-generation-async-storage.external":
/*!******************************************************************************************!*\
  !*** external "next/dist/client/components/static-generation-async-storage.external.js" ***!
  \******************************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/client/components/static-generation-async-storage.external.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "assert":
/*!*************************!*\
  !*** external "assert" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("assert");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("querystring");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute&page=%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute.ts&appDir=C%3A%5CUsers%5CHimanshu%20Chauhan%5COneDrive%5CDesktop%5Ccreative-app%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHimanshu%20Chauhan%5COneDrive%5CDesktop%5Ccreative-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute&page=%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute.ts&appDir=C%3A%5CUsers%5CHimanshu%20Chauhan%5COneDrive%5CDesktop%5Ccreative-app%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHimanshu%20Chauhan%5COneDrive%5CDesktop%5Ccreative-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \**********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_Himanshu_Chauhan_OneDrive_Desktop_creative_app_src_app_api_writings_writeupId_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/writings/[writeupId]/route.ts */ \"(rsc)/./src/app/api/writings/[writeupId]/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/writings/[writeupId]/route\",\n        pathname: \"/api/writings/[writeupId]\",\n        filename: \"route\",\n        bundlePath: \"app/api/writings/[writeupId]/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\Himanshu Chauhan\\\\OneDrive\\\\Desktop\\\\creative-app\\\\src\\\\app\\\\api\\\\writings\\\\[writeupId]\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_Himanshu_Chauhan_OneDrive_Desktop_creative_app_src_app_api_writings_writeupId_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/writings/[writeupId]/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ3cml0aW5ncyUyRiU1QndyaXRldXBJZCU1RCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGd3JpdGluZ3MlMkYlNUJ3cml0ZXVwSWQlNUQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ3cml0aW5ncyUyRiU1QndyaXRldXBJZCU1RCUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNIaW1hbnNodSUyMENoYXVoYW4lNUNPbmVEcml2ZSU1Q0Rlc2t0b3AlNUNjcmVhdGl2ZS1hcHAlNUNzcmMlNUNhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPUMlM0ElNUNVc2VycyU1Q0hpbWFuc2h1JTIwQ2hhdWhhbiU1Q09uZURyaXZlJTVDRGVza3RvcCU1Q2NyZWF0aXZlLWFwcCZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ2M7QUFDNEQ7QUFDekk7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxpRUFBaUU7QUFDekU7QUFDQTtBQUNBLFdBQVcsNEVBQVc7QUFDdEI7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUN1SDs7QUFFdkgiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9xdW90aWVudC8/N2MzMSJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxIaW1hbnNodSBDaGF1aGFuXFxcXE9uZURyaXZlXFxcXERlc2t0b3BcXFxcY3JlYXRpdmUtYXBwXFxcXHNyY1xcXFxhcHBcXFxcYXBpXFxcXHdyaXRpbmdzXFxcXFt3cml0ZXVwSWRdXFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS93cml0aW5ncy9bd3JpdGV1cElkXS9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3dyaXRpbmdzL1t3cml0ZXVwSWRdXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS93cml0aW5ncy9bd3JpdGV1cElkXS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXEhpbWFuc2h1IENoYXVoYW5cXFxcT25lRHJpdmVcXFxcRGVza3RvcFxcXFxjcmVhdGl2ZS1hcHBcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcd3JpdGluZ3NcXFxcW3dyaXRldXBJZF1cXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3dyaXRpbmdzL1t3cml0ZXVwSWRdL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute&page=%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute.ts&appDir=C%3A%5CUsers%5CHimanshu%20Chauhan%5COneDrive%5CDesktop%5Ccreative-app%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHimanshu%20Chauhan%5COneDrive%5CDesktop%5Ccreative-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/writings/[writeupId]/route.ts":
/*!***************************************************!*\
  !*** ./src/app/api/writings/[writeupId]/route.ts ***!
  \***************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   PATCH: () => (/* binding */ PATCH)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth */ \"(rsc)/./node_modules/next-auth/index.js\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_auth__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth */ \"(rsc)/./src/lib/auth.ts\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n\n\nasync function PATCH(req, { params }) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user?.email) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Unauthorized\", {\n                status: 401\n            });\n        }\n        const body = await req.json();\n        const { title, content, collectionId } = body;\n        if (!title) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Title is required\", {\n                status: 400\n            });\n        }\n        const user = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.user.findUnique({\n            where: {\n                email: session.user.email\n            }\n        });\n        if (!user) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"User not found\", {\n                status: 404\n            });\n        }\n        // Verify writing exists and belongs to user\n        const existingWriting = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.writing.findFirst({\n            where: {\n                id: params.writeupId,\n                userId: user.id\n            },\n            include: {\n                collections: true\n            }\n        });\n        if (!existingWriting) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Writing not found\", {\n                status: 404\n            });\n        }\n        // If collectionId is provided, verify it belongs to the user\n        if (collectionId) {\n            const collection = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.collection.findFirst({\n                where: {\n                    id: collectionId,\n                    userId: user.id\n                }\n            });\n            if (!collection) {\n                return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Collection not found\", {\n                    status: 404\n                });\n            }\n        }\n        try {\n            // Update writing and create version\n            const [writing, version] = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.$transaction(async (tx)=>{\n                // Update the writing\n                const updatedWriting = await tx.writing.update({\n                    where: {\n                        id: params.writeupId\n                    },\n                    data: {\n                        title,\n                        content,\n                        collections: {\n                            // First disconnect all existing collections\n                            disconnect: existingWriting.collections.map((c)=>({\n                                    id: c.id\n                                })),\n                            // Then connect the new collection if provided\n                            ...collectionId && {\n                                connect: [\n                                    {\n                                        id: collectionId\n                                    }\n                                ]\n                            }\n                        }\n                    },\n                    include: {\n                        collections: {\n                            select: {\n                                id: true,\n                                name: true\n                            }\n                        }\n                    }\n                });\n                // Get latest version number\n                const latestVersion = await tx.writingVersion.findFirst({\n                    where: {\n                        writingId: params.writeupId\n                    },\n                    orderBy: {\n                        versionNumber: \"desc\"\n                    }\n                });\n                // Create new version\n                const nextVersionNumber = (latestVersion?.versionNumber ?? 0) + 1;\n                const newVersion = await tx.writingVersion.create({\n                    data: {\n                        title: updatedWriting.title,\n                        content: updatedWriting.content,\n                        versionNumber: nextVersionNumber,\n                        writingId: updatedWriting.id\n                    }\n                });\n                // Keep only last 3 versions\n                const oldVersions = await tx.writingVersion.findMany({\n                    where: {\n                        writingId: params.writeupId\n                    },\n                    orderBy: {\n                        versionNumber: \"desc\"\n                    },\n                    skip: 3\n                });\n                if (oldVersions.length > 0) {\n                    await tx.writingVersion.deleteMany({\n                        where: {\n                            id: {\n                                in: oldVersions.map((v)=>v.id)\n                            }\n                        }\n                    });\n                }\n                return [\n                    updatedWriting,\n                    newVersion\n                ];\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                writing,\n                version\n            });\n        } catch (txError) {\n            console.error(\"[WRITEUP_PATCH_TRANSACTION]\", txError);\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Failed to update writing or create version. Please try again.\", {\n                status: 500\n            });\n        }\n    } catch (error) {\n        console.error(\"[WRITEUP_PATCH]\", error);\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"An unexpected error occurred. Please try again.\", {\n            status: 500\n        });\n    }\n}\nasync function DELETE(req, { params }) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(_lib_auth__WEBPACK_IMPORTED_MODULE_2__.authOptions);\n        if (!session?.user) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Unauthorized - No session\", {\n                status: 401\n            });\n        }\n        const user = session.user;\n        if (!user.id) {\n            return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Unauthorized - No user ID\", {\n                status: 401\n            });\n        }\n        console.log(\"[DELETE] Starting deletion process\", {\n            writingId: params.writeupId,\n            userId: user.id\n        });\n        // Use a transaction to ensure data consistency\n        const result = await _lib_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma.$transaction(async (tx)=>{\n            // First check if the writing exists and belongs to the user\n            const writeup = await tx.writing.findUnique({\n                where: {\n                    id: params.writeupId\n                },\n                select: {\n                    userId: true,\n                    id: true\n                }\n            });\n            if (!writeup) {\n                console.log(\"[DELETE] Writing not found:\", params.writeupId);\n                throw new Error(\"Writing not found\");\n            }\n            if (writeup.userId !== user.id) {\n                console.log(\"[DELETE] Unauthorized - User ID mismatch.\", {\n                    expected: writeup.userId,\n                    got: user.id\n                });\n                throw new Error(\"Unauthorized - Not the owner\");\n            }\n            // If all checks pass, delete the writing\n            return await tx.writing.delete({\n                where: {\n                    id: params.writeupId\n                }\n            });\n        });\n        console.log(\"[DELETE] Successfully deleted writing\", result);\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(null, {\n            status: 204\n        });\n    } catch (error) {\n        console.error(\"[DELETE] Error occurred:\", {\n            error,\n            errorMessage: error instanceof Error ? error.message : \"Unknown error\",\n            errorStack: error instanceof Error ? error.stack : undefined,\n            params: params\n        });\n        if (error instanceof Error) {\n            if (error.message === \"Writing not found\") {\n                return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Writing not found\", {\n                    status: 404\n                });\n            }\n            if (error.message === \"Unauthorized - Not the owner\") {\n                return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Unauthorized\", {\n                    status: 401\n                });\n            }\n        }\n        // Check if it's a Prisma error\n        const prismaError = error;\n        if (prismaError.code) {\n            console.error(\"[DELETE] Prisma error:\", {\n                code: prismaError.code,\n                meta: prismaError.meta\n            });\n        }\n        return new next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse(\"Internal Server Error\", {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS93cml0aW5ncy9bd3JpdGV1cElkXS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW1FO0FBQ3RCO0FBQ0o7QUFDSDtBQUUvQixlQUFlSSxNQUNwQkMsR0FBWSxFQUNaLEVBQUVDLE1BQU0sRUFBcUM7SUFFN0MsSUFBSTtRQUNGLE1BQU1DLFVBQVUsTUFBTU4sMkRBQWdCQSxDQUFDQyxrREFBV0E7UUFFbEQsSUFBSSxDQUFDSyxTQUFTQyxNQUFNQyxPQUFPO1lBQ3pCLE9BQU8sSUFBSVQscURBQVlBLENBQUMsZ0JBQWdCO2dCQUFFVSxRQUFRO1lBQUk7UUFDeEQ7UUFFQSxNQUFNQyxPQUFPLE1BQU1OLElBQUlPLElBQUk7UUFDM0IsTUFBTSxFQUFFQyxLQUFLLEVBQUVDLE9BQU8sRUFBRUMsWUFBWSxFQUFFLEdBQUdKO1FBRXpDLElBQUksQ0FBQ0UsT0FBTztZQUNWLE9BQU8sSUFBSWIscURBQVlBLENBQUMscUJBQXFCO2dCQUFFVSxRQUFRO1lBQUk7UUFDN0Q7UUFFQSxNQUFNRixPQUFPLE1BQU1MLCtDQUFNQSxDQUFDSyxJQUFJLENBQUNRLFVBQVUsQ0FBQztZQUN4Q0MsT0FBTztnQkFDTFIsT0FBT0YsUUFBUUMsSUFBSSxDQUFDQyxLQUFLO1lBQzNCO1FBQ0Y7UUFFQSxJQUFJLENBQUNELE1BQU07WUFDVCxPQUFPLElBQUlSLHFEQUFZQSxDQUFDLGtCQUFrQjtnQkFBRVUsUUFBUTtZQUFJO1FBQzFEO1FBRUEsNENBQTRDO1FBQzVDLE1BQU1RLGtCQUFrQixNQUFNZiwrQ0FBTUEsQ0FBQ2dCLE9BQU8sQ0FBQ0MsU0FBUyxDQUFDO1lBQ3JESCxPQUFPO2dCQUNMSSxJQUFJZixPQUFPZ0IsU0FBUztnQkFDcEJDLFFBQVFmLEtBQUthLEVBQUU7WUFDakI7WUFDQUcsU0FBUztnQkFDUEMsYUFBYTtZQUNmO1FBQ0Y7UUFFQSxJQUFJLENBQUNQLGlCQUFpQjtZQUNwQixPQUFPLElBQUlsQixxREFBWUEsQ0FBQyxxQkFB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TSxJQUFJd0MsTUFBTTtZQUNsQjtZQUVBLHlDQUF5QztZQUN6QyxPQUFPLE1BQU1oQyxHQUFHVixPQUFPLENBQUM2QyxNQUFNLENBQUM7Z0JBQzdCL0MsT0FBTztvQkFDTEksSUFBSWYsT0FBT2dCLFNBQVM7Z0JBQ3RCO1lBQ0Y7UUFDRjtRQUVBaUMsUUFBUUcsR0FBRyxDQUFDLHlDQUF5Q0M7UUFDckQsT0FBTyxJQUFJM0QscURBQVlBLENBQUMsTUFBTTtZQUFFVSxRQUFRO1FBQUk7SUFFOUMsRUFBRSxPQUFPOEMsT0FBTztRQUNkRCxRQUFRQyxLQUFLLENBQUMsNEJBQTRCO1lBQ3hDQTtZQUNBUyxjQUFjVCxpQkFBaUJLLFFBQVFMLE1BQU1VLE9BQU8sR0FBRztZQUN2REMsWUFBWVgsaUJBQWlCSyxRQUFRTCxNQUFNWSxLQUFLLEdBQUdDO1lBQ25EL0QsUUFBUUE7UUFDVjtRQUVBLElBQUlrRCxpQkFBaUJLLE9BQU87WUFDMUIsSUFBSUwsTUFBTVUsT0FBTyxLQUFLLHFCQUFxQjtnQkFDekMsT0FBTyxJQUFJbEUscURBQVlBLENBQUMscUJBQXFCO29CQUFFVSxRQUFRO2dCQUFJO1lBQzdEO1lBQ0EsSUFBSThDLE1BQU1VLE9BQU8sS0FBSyxnQ0FBZ0M7Z0JBQ3BELE9BQU8sSUFBSWxFLHFEQUFZQSxDQUFDLGdCQUFnQjtvQkFBRVUsUUFBUTtnQkFBSTtZQUN4RDtRQUNGO1FBRUEsK0JBQStCO1FBQy9CLE1BQU00RCxjQUFjZDtRQUNwQixJQUFJYyxZQUFZQyxJQUFJLEVBQUU7WUFDcEJoQixRQUFRQyxLQUFLLENBQUMsMEJBQTBCO2dCQUN0Q2UsTUFBTUQsWUFBWUMsSUFBSTtnQkFDdEJDLE1BQU1GLFlBQVlFLElBQUk7WUFDeEI7UUFDRjtRQUVBLE9BQU8sSUFBSXhFLHFEQUFZQSxDQUFDLHlCQUF5QjtZQUFFVSxRQUFRO1FBQUk7SUFDakU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3F1b3RpZW50Ly4vc3JjL2FwcC9hcGkvd3JpdGluZ3MvW3dyaXRldXBJZF0vcm91dGUudHM/OGQyZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UsIE5leHRSZXF1ZXN0IGFzIFJlcXVlc3QgfSBmcm9tIFwibmV4dC9zZXJ2ZXJcIjtcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoXCI7XG5pbXBvcnQgeyBhdXRoT3B0aW9ucyB9IGZyb20gXCJAL2xpYi9hdXRoXCI7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiQC9saWIvcHJpc21hXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQQVRDSChcbiAgcmVxOiBSZXF1ZXN0LFxuICB7IHBhcmFtcyB9OiB7IHBhcmFtczogeyB3cml0ZXVwSWQ6IHN0cmluZyB9IH1cbikge1xuICB0cnkge1xuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKGF1dGhPcHRpb25zKTtcblxuICAgIGlmICghc2Vzc2lvbj8udXNlcj8uZW1haWwpIHtcbiAgICAgIHJldHVybiBuZXcgTmV4dFJlc3BvbnNlKFwiVW5hdXRob3JpemVkXCIsIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKCk7XG4gICAgY29uc3QgeyB0aXRsZSwgY29udGVudCwgY29sbGVjdGlvbklkIH0gPSBib2R5O1xuXG4gICAgaWYgKCF0aXRsZSkge1xuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXCJUaXRsZSBpcyByZXF1aXJlZFwiLCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBwcmlzbWEudXNlci5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGVtYWlsOiBzZXNzaW9uLnVzZXIuZW1haWwsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcIlVzZXIgbm90IGZvdW5kXCIsIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZ5IHdyaXRpbmcgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIHVzZXJcbiAgICBjb25zdCBleGlzdGluZ1dyaXRpbmcgPSBhd2FpdCBwcmlzbWEud3JpdGluZy5maW5kRmlyc3Qoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IHBhcmFtcy53cml0ZXVwSWQsXG4gICAgICAgIHVzZXJJZDogdXNlci5pZCxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGNvbGxlY3Rpb25zOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghZXhpc3RpbmdXcml0aW5nKSB7XG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcIldyaXRpbmcgbm90IGZvdW5kXCIsIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgfVxuXG4gICAgLy8gSWYgY29sbGVjdGlvbklkIGlzIHByb3ZpZGVkLCB2ZXJpZnkgaXQgYmVsb25ncyB0byB0aGUgdXNlclxuICAgIGlmIChjb2xsZWN0aW9uSWQpIHtcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb24gPSBhd2FpdCBwcmlzbWEuY29sbGVjdGlvbi5maW5kRmlyc3Qoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGlkOiBjb2xsZWN0aW9uSWQsXG4gICAgICAgICAgdXNlcklkOiB1c2VyLmlkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIGlmICghY29sbGVjdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcIkNvbGxlY3Rpb24gbm90IGZvdW5kXCIsIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFVwZGF0ZSB3cml0aW5nIGFuZCBjcmVhdGUgdmVyc2lvblxuICAgICAgY29uc3QgW3dyaXRpbmcsIHZlcnNpb25dID0gYXdhaXQgcHJpc21hLiR0cmFuc2FjdGlvbihhc3luYyAodHgpID0+IHtcbiAgICAgICAgLy8gVXBkYXRlIHRoZSB3cml0aW5nXG4gICAgICAgIGNvbnN0IHVwZGF0ZWRXcml0aW5nID0gYXdhaXQgdHgud3JpdGluZy51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBpZDogcGFyYW1zLndyaXRldXBJZCxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHRpdGxlLFxuICAgICAgICAgICAgY29udGVudCxcbiAgICAgICAgICAgIGNvbGxlY3Rpb25zOiB7XG4gICAgICAgICAgICAgIC8vIEZpcnN0IGRpc2Nvbm5lY3QgYWxsIGV4aXN0aW5nIGNvbGxlY3Rpb25zXG4gICAgICAgICAgICAgIGRpc2Nvbm5lY3Q6IGV4aXN0aW5nV3JpdGluZy5jb2xsZWN0aW9ucy5tYXAoYyA9PiAoeyBpZDogYy5pZCB9KSksXG4gICAgICAgICAgICAgIC8vIFRoZW4gY29ubmVjdCB0aGUgbmV3IGNvbGxlY3Rpb24gaWYgcHJvdmlkZWRcbiAgICAgICAgICAgICAgLi4uKGNvbGxlY3Rpb25JZCAmJiB7XG4gICAgICAgICAgICAgICAgY29ubmVjdDogW3sgaWQ6IGNvbGxlY3Rpb25JZCB9XSxcbiAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgICAgY29sbGVjdGlvbnM6IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gR2V0IGxhdGVzdCB2ZXJzaW9uIG51bWJlclxuICAgICAgICBjb25zdCBsYXRlc3RWZXJzaW9uID0gYXdhaXQgdHgud3JpdGluZ1ZlcnNpb24uZmluZEZpcnN0KHtcbiAgICAgICAgICB3aGVyZTogeyB3cml0aW5nSWQ6IHBhcmFtcy53cml0ZXVwSWQgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IHZlcnNpb25OdW1iZXI6ICdkZXNjJyB9LFxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDcmVhdGUgbmV3IHZlcnNpb25cbiAgICAgICAgY29uc3QgbmV4dFZlcnNpb25OdW1iZXIgPSAobGF0ZXN0VmVyc2lvbj8udmVyc2lvbk51bWJlciA/PyAwKSArIDE7XG4gICAgICAgIGNvbnN0IG5ld1ZlcnNpb24gPSBhd2FpdCB0eC53cml0aW5nVmVyc2lvbi5jcmVhdGUoe1xuICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgIHRpdGxlOiB1cGRhdGVkV3JpdGluZy50aXRsZSxcbiAgICAgICAgICAgIGNvbnRlbnQ6IHVwZGF0ZWRXcml0aW5nLmNvbnRlbnQsXG4gICAgICAgICAgICB2ZXJzaW9uTnVtYmVyOiBuZXh0VmVyc2lvbk51bWJlcixcbiAgICAgICAgICAgIHdyaXRpbmdJZDogdXBkYXRlZFdyaXRpbmcuaWQsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gS2VlcCBvbmx5IGxhc3QgMyB2ZXJzaW9uc1xuICAgICAgICBjb25zdCBvbGRWZXJzaW9ucyA9IGF3YWl0IHR4LndyaXRpbmdWZXJzaW9uLmZpbmRNYW55KHtcbiAgICAgICAgICB3aGVyZTogeyB3cml0aW5nSWQ6IHBhcmFtcy53cml0ZXVwSWQgfSxcbiAgICAgICAgICBvcmRlckJ5OiB7IHZlcnNpb25OdW1iZXI6ICdkZXNjJyB9LFxuICAgICAgICAgIHNraXA6IDMsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChvbGRWZXJzaW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgYXdhaXQgdHgud3JpdGluZ1ZlcnNpb24uZGVsZXRlTWFueSh7XG4gICAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgICBpZDoge1xuICAgICAgICAgICAgICAgIGluOiBvbGRWZXJzaW9ucy5tYXAodiA9PiB2LmlkKSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gW3VwZGF0ZWRXcml0aW5nLCBuZXdWZXJzaW9uXTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyB3cml0aW5nLCB2ZXJzaW9uIH0pO1xuICAgIH0gY2F0Y2ggKHR4RXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJbV1JJVEVVUF9QQVRDSF9UUkFOU0FDVElPTl1cIiwgdHhFcnJvcik7XG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcbiAgICAgICAgXCJGYWlsZWQgdG8gdXBkYXRlIHdyaXRpbmcgb3IgY3JlYXRlIHZlcnNpb24uIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gICAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICAgKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltXUklURVVQX1BBVENIXVwiLCBlcnJvcik7XG4gICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXG4gICAgICBcIkFuIHVuZXhwZWN0ZWQgZXJyb3Igb2NjdXJyZWQuIFBsZWFzZSB0cnkgYWdhaW4uXCIsXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUoXG4gIHJlcTogUmVxdWVzdCxcbiAgeyBwYXJhbXMgfTogeyBwYXJhbXM6IHsgd3JpdGV1cElkOiBzdHJpbmcgfSB9XG4pIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBzZXNzaW9uID0gYXdhaXQgZ2V0U2VydmVyU2Vzc2lvbihhdXRoT3B0aW9ucyk7XG4gICAgXG4gICAgaWYgKCFzZXNzaW9uPy51c2VyKSB7XG4gICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcIlVuYXV0aG9yaXplZCAtIE5vIHNlc3Npb25cIiwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB1c2VyID0gc2Vzc2lvbi51c2VyIGFzIHsgaWQ6IHN0cmluZzsgZW1haWw6IHN0cmluZyB9O1xuICAgIFxuICAgIGlmICghdXNlci5pZCkge1xuICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXCJVbmF1dGhvcml6ZWQgLSBObyB1c2VyIElEXCIsIHsgc3RhdHVzOiA0MDEgfSk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCJbREVMRVRFXSBTdGFydGluZyBkZWxldGlvbiBwcm9jZXNzXCIsIHtcbiAgICAgIHdyaXRpbmdJZDogcGFyYW1zLndyaXRldXBJZCxcbiAgICAgIHVzZXJJZDogdXNlci5pZFxuICAgIH0pO1xuXG4gICAgLy8gVXNlIGEgdHJhbnNhY3Rpb24gdG8gZW5zdXJlIGRhdGEgY29uc2lzdGVuY3lcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eCkgPT4ge1xuICAgICAgLy8gRmlyc3QgY2hlY2sgaWYgdGhlIHdyaXRpbmcgZXhpc3RzIGFuZCBiZWxvbmdzIHRvIHRoZSB1c2VyXG4gICAgICBjb25zdCB3cml0ZXVwID0gYXdhaXQgdHgud3JpdGluZy5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBpZDogcGFyYW1zLndyaXRldXBJZCxcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgdXNlcklkOiB0cnVlLFxuICAgICAgICAgIGlkOiB0cnVlXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgaWYgKCF3cml0ZXVwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiW0RFTEVURV0gV3JpdGluZyBub3QgZm91bmQ6XCIsIHBhcmFtcy53cml0ZXVwSWQpO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJXcml0aW5nIG5vdCBmb3VuZFwiKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHdyaXRldXAudXNlcklkICE9PSB1c2VyLmlkKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiW0RFTEVURV0gVW5hdXRob3JpemVkIC0gVXNlciBJRCBtaXNtYXRjaC5cIiwge1xuICAgICAgICAgIGV4cGVjdGVkOiB3cml0ZXVwLnVzZXJJZCxcbiAgICAgICAgICBnb3Q6IHVzZXIuaWRcbiAgICAgICAgfSk7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlVuYXV0aG9yaXplZCAtIE5vdCB0aGUgb3duZXJcIik7XG4gICAgICB9XG5cbiAgICAgIC8vIElmIGFsbCBjaGVja3MgcGFzcywgZGVsZXRlIHRoZSB3cml0aW5nXG4gICAgICByZXR1cm4gYXdhaXQgdHgud3JpdGluZy5kZWxldGUoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGlkOiBwYXJhbXMud3JpdGV1cElkLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zb2xlLmxvZyhcIltERUxFVEVdIFN1Y2Nlc3NmdWxseSBkZWxldGVkIHdyaXRpbmdcIiwgcmVzdWx0KTtcbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShudWxsLCB7IHN0YXR1czogMjA0IH0pO1xuXG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIltERUxFVEVdIEVycm9yIG9jY3VycmVkOlwiLCB7XG4gICAgICBlcnJvcixcbiAgICAgIGVycm9yTWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcbiAgICAgIGVycm9yU3RhY2s6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5zdGFjayA6IHVuZGVmaW5lZCxcbiAgICAgIHBhcmFtczogcGFyYW1zXG4gICAgfSk7XG5cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09IFwiV3JpdGluZyBub3QgZm91bmRcIikge1xuICAgICAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcIldyaXRpbmcgbm90IGZvdW5kXCIsIHsgc3RhdHVzOiA0MDQgfSk7XG4gICAgICB9XG4gICAgICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gXCJVbmF1dGhvcml6ZWQgLSBOb3QgdGhlIG93bmVyXCIpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBOZXh0UmVzcG9uc2UoXCJVbmF1dGhvcml6ZWRcIiwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBpdCdzIGEgUHJpc21hIGVycm9yXG4gICAgY29uc3QgcHJpc21hRXJyb3IgPSBlcnJvciBhcyB7IGNvZGU/OiBzdHJpbmc7IG1ldGE/OiB7IGNhdXNlPzogc3RyaW5nIH0gfTtcbiAgICBpZiAocHJpc21hRXJyb3IuY29kZSkge1xuICAgICAgY29uc29sZS5lcnJvcihcIltERUxFVEVdIFByaXNtYSBlcnJvcjpcIiwge1xuICAgICAgICBjb2RlOiBwcmlzbWFFcnJvci5jb2RlLFxuICAgICAgICBtZXRhOiBwcmlzbWFFcnJvci5tZXRhXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IE5leHRSZXNwb25zZShcIkludGVybmFsIFNlcnZlciBFcnJvclwiLCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiZ2V0U2VydmVyU2Vzc2lvbiIsImF1dGhPcHRpb25zIiwicHJpc21hIiwiUEFUQ0giLCJyZXEiLCJwYXJhbXMiLCJzZXNzaW9uIiwidXNlciIsImVtYWlsIiwic3RhdHVzIiwiYm9keSIsImpzb24iLCJ0aXRsZSIsImNvbnRlbnQiLCJjb2xsZWN0aW9uSWQiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJleGlzdGluZ1dyaXRpbmciLCJ3cml0aW5nIiwiZmluZEZpcnN0IiwiaWQiLCJ3cml0ZXVwSWQiLCJ1c2VySWQiLCJpbmNsdWRlIiwiY29sbGVjdGlvbnMiLCJjb2xsZWN0aW9uIiwidmVyc2lvbiIsIiR0cmFuc2FjdGlvbiIsInR4IiwidXBkYXRlZFdyaXRpbmciLCJ1cGRhdGUiLCJkYXRhIiwiZGlzY29ubmVjdCIsIm1hcCIsImMiLCJjb25uZWN0Iiwic2VsZWN0IiwibmFtZSIsImxhdGVzdFZlcnNpb24iLCJ3cml0aW5nVmVyc2lvbiIsIndyaXRpbmdJZCIsIm9yZGVyQnkiLCJ2ZXJzaW9uTnVtYmVyIiwibmV4dFZlcnNpb25OdW1iZXIiLCJuZXdWZXJzaW9uIiwiY3JlYXRlIiwib2xkVmVyc2lvbnMiLCJmaW5kTWFueSIsInNraXAiLCJsZW5ndGgiLCJkZWxldGVNYW55IiwiaW4iLCJ2IiwidHhFcnJvciIsImNvbnNvbGUiLCJlcnJvciIsIkRFTEVURSIsImxvZyIsInJlc3VsdCIsIndyaXRldXAiLCJFcnJvciIsImV4cGVjdGVkIiwiZ290IiwiZGVsZXRlIiwiZXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsImVycm9yU3RhY2siLCJzdGFjayIsInVuZGVmaW5lZCIsInByaXNtYUVycm9yIiwiY29kZSIsIm1ldGEiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/writings/[writeupId]/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/auth.ts":
/*!*************************!*\
  !*** ./src/lib/auth.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authOptions: () => (/* binding */ authOptions),\n/* harmony export */   getServerAuthSession: () => (/* binding */ getServerAuthSession)\n/* harmony export */ });\n/* harmony import */ var _auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @auth/prisma-adapter */ \"(rsc)/./node_modules/@auth/prisma-adapter/index.js\");\n/* harmony import */ var next_auth_next__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next-auth/next */ \"(rsc)/./node_modules/next-auth/next/index.js\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/google */ \"(rsc)/./node_modules/next-auth/providers/google.js\");\n/* harmony import */ var _prisma__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./prisma */ \"(rsc)/./src/lib/prisma.ts\");\n\n\n\n\nconst authOptions = {\n    adapter: (0,_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_0__.PrismaAdapter)(_prisma__WEBPACK_IMPORTED_MODULE_3__.prisma),\n    session: {\n        strategy: \"jwt\"\n    },\n    providers: [\n        (0,next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__[\"default\"])({\n            clientId: process.env.GOOGLE_CLIENT_ID,\n            clientSecret: process.env.GOOGLE_CLIENT_SECRET\n        })\n    ],\n    callbacks: {\n        jwt: async ({ token, user, account, profile })=>{\n            if (user) {\n                token.id = user.id;\n                token.picture = user.image;\n            }\n            return token;\n        },\n        session: async ({ session, token })=>{\n            if (session?.user) {\n                session.user.id = token.id;\n                session.user.image = token.picture;\n            }\n            return session;\n        }\n    },\n    pages: {\n        signIn: \"/sign-in\"\n    },\n    secret: process.env.NEXTAUTH_SECRET\n};\nconst getServerAuthSession = ()=>(0,next_auth_next__WEBPACK_IMPORTED_MODULE_1__.getServerSession)(authOptions);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2F1dGgudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQXFEO0FBRUg7QUFDTTtBQUN0QjtBQWEzQixNQUFNSSxjQUErQjtJQUMxQ0MsU0FBU0wsbUVBQWFBLENBQUNHLDJDQUFNQTtJQUM3QkcsU0FBUztRQUNQQyxVQUFVO0lBQ1o7SUFDQUMsV0FBVztRQUNUTixzRUFBY0EsQ0FBQztZQUNiTyxVQUFVQyxRQUFRQyxHQUFHLENBQUNDLGdCQUFnQjtZQUN0Q0MsY0FBY0gsUUFBUUMsR0FBRyxDQUFDRyxvQkFBb0I7UUFDaEQ7S0FDRDtJQUNEQyxXQUFXO1FBQ1RDLEtBQUssT0FBTyxFQUFFQyxLQUFLLEVBQUVDLElBQUksRUFBRUMsT0FBTyxFQUFFQyxPQUFPLEVBQUU7WUFDM0MsSUFBSUYsTUFBTTtnQkFDUkQsTUFBTUksRUFBRSxHQUFHSCxLQUFLRyxFQUFFO2dCQUNsQkosTUFBTUssT0FBTyxHQUFHSixLQUFLSyxLQUFLO1lBQzVCO1lBQ0EsT0FBT047UUFDVDtRQUNBWCxTQUFTLE9BQU8sRUFBRUEsT0FBTyxFQUFFVyxLQUFLLEVBQUU7WUFDaEMsSUFBSVgsU0FBU1ksTUFBTTtnQkFDakJaLFFBQVFZLElBQUksQ0FBQ0csRUFBRSxHQUFHSixNQUFNSSxFQUFFO2dCQUMxQmYsUUFBUVksSUFBSSxDQUFDSyxLQUFLLEdBQUdOLE1BQU1LLE9BQU87WUFDcEM7WUFDQSxPQUFPaEI7UUFDVDtJQUNGO0lBQ0FrQixPQUFPO1FBQ0xDLFFBQVE7SUFDVjtJQUNBQyxRQUFRaEIsUUFBUUMsR0FBRyxDQUFDZ0IsZUFBZTtBQUNyQyxFQUFFO0FBRUssTUFBTUMsdUJBQXVCLElBQU0zQixnRUFBZ0JBLENBQUNHLGFBQWEiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9xdW90aWVudC8uL3NyYy9saWIvYXV0aC50cz82NjkyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFByaXNtYUFkYXB0ZXIgfSBmcm9tIFwiQGF1dGgvcHJpc21hLWFkYXB0ZXJcIjtcbmltcG9ydCB7IE5leHRBdXRoT3B0aW9ucyB9IGZyb20gXCJuZXh0LWF1dGhcIjtcbmltcG9ydCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoL25leHRcIjtcbmltcG9ydCBHb29nbGVQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9nb29nbGVcIjtcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCIuL3ByaXNtYVwiO1xuXG5kZWNsYXJlIG1vZHVsZSBcIm5leHQtYXV0aFwiIHtcbiAgaW50ZXJmYWNlIFNlc3Npb24ge1xuICAgIHVzZXI6IHtcbiAgICAgIGlkOiBzdHJpbmc7XG4gICAgICBuYW1lPzogc3RyaW5nIHwgbnVsbDtcbiAgICAgIGVtYWlsPzogc3RyaW5nIHwgbnVsbDtcbiAgICAgIGltYWdlPzogc3RyaW5nIHwgbnVsbDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGF1dGhPcHRpb25zOiBOZXh0QXV0aE9wdGlvbnMgPSB7XG4gIGFkYXB0ZXI6IFByaXNtYUFkYXB0ZXIocHJpc21hKSBhcyBhbnksXG4gIHNlc3Npb246IHtcbiAgICBzdHJhdGVneTogXCJqd3RcIixcbiAgfSxcbiAgcHJvdmlkZXJzOiBbXG4gICAgR29vZ2xlUHJvdmlkZXIoe1xuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdPT0dMRV9DTElFTlRfSUQhLFxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HT09HTEVfQ0xJRU5UX1NFQ1JFVCEsXG4gICAgfSksXG4gIF0sXG4gIGNhbGxiYWNrczoge1xuICAgIGp3dDogYXN5bmMgKHsgdG9rZW4sIHVzZXIsIGFjY291bnQsIHByb2ZpbGUgfSkgPT4ge1xuICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgdG9rZW4uaWQgPSB1c2VyLmlkO1xuICAgICAgICB0b2tlbi5waWN0dXJlID0gdXNlci5pbWFnZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0b2tlbjtcbiAgICB9LFxuICAgIHNlc3Npb246IGFzeW5jICh7IHNlc3Npb24sIHRva2VuIH0pID0+IHtcbiAgICAgIGlmIChzZXNzaW9uPy51c2VyKSB7XG4gICAgICAgIHNlc3Npb24udXNlci5pZCA9IHRva2VuLmlkIGFzIHN0cmluZztcbiAgICAgICAgc2Vzc2lvbi51c2VyLmltYWdlID0gdG9rZW4ucGljdHVyZSBhcyBzdHJpbmc7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2Vzc2lvbjtcbiAgICB9LFxuICB9LFxuICBwYWdlczoge1xuICAgIHNpZ25JbjogXCIvc2lnbi1pblwiLFxuICB9LFxuICBzZWNyZXQ6IHByb2Nlc3MuZW52Lk5FWFRBVVRIX1NFQ1JFVCxcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJBdXRoU2Vzc2lvbiA9ICgpID0+IGdldFNlcnZlclNlc3Npb24oYXV0aE9wdGlvbnMpO1xuIl0sIm5hbWVzIjpbIlByaXNtYUFkYXB0ZXIiLCJnZXRTZXJ2ZXJTZXNzaW9uIiwiR29vZ2xlUHJvdmlkZXIiLCJwcmlzbWEiLCJhdXRoT3B0aW9ucyIsImFkYXB0ZXIiLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJwcm92aWRlcnMiLCJjbGllbnRJZCIsInByb2Nlc3MiLCJlbnYiLCJHT09HTEVfQ0xJRU5UX0lEIiwiY2xpZW50U2VjcmV0IiwiR09PR0xFX0NMSUVOVF9TRUNSRVQiLCJjYWxsYmFja3MiLCJqd3QiLCJ0b2tlbiIsInVzZXIiLCJhY2NvdW50IiwicHJvZmlsZSIsImlkIiwicGljdHVyZSIsImltYWdlIiwicGFnZXMiLCJzaWduSW4iLCJzZWNyZXQiLCJORVhUQVVUSF9TRUNSRVQiLCJnZXRTZXJ2ZXJBdXRoU2Vzc2lvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/auth.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\nconst globalForPrisma = globalThis;\nconst prisma = globalForPrisma.prisma ?? new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) {\n    globalForPrisma.prisma = prisma;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7QUFBOEM7QUFFOUMsTUFBTUMsa0JBQWtCQztBQUlqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRztBQUVuRSxJQUFJSSxJQUF5QixFQUFjO0lBQ3pDSCxnQkFBZ0JFLE1BQU0sR0FBR0E7QUFDM0IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9xdW90aWVudC8uL3NyYy9saWIvcHJpc21hLnRzPzAxZDciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJpc21hQ2xpZW50IH0gZnJvbSAnQHByaXNtYS9jbGllbnQnO1xuXG5jb25zdCBnbG9iYWxGb3JQcmlzbWEgPSBnbG9iYWxUaGlzIGFzIHVua25vd24gYXMge1xuICBwcmlzbWE6IFByaXNtYUNsaWVudCB8IHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBjb25zdCBwcmlzbWEgPSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID8/IG5ldyBQcmlzbWFDbGllbnQoKTtcblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgZ2xvYmFsRm9yUHJpc21hLnByaXNtYSA9IHByaXNtYTtcbn1cbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJnbG9iYWxGb3JQcmlzbWEiLCJnbG9iYWxUaGlzIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/next-auth","vendor-chunks/@babel","vendor-chunks/openid-client","vendor-chunks/oauth","vendor-chunks/object-hash","vendor-chunks/preact","vendor-chunks/uuid","vendor-chunks/yallist","vendor-chunks/preact-render-to-string","vendor-chunks/lru-cache","vendor-chunks/cookie","vendor-chunks/@auth","vendor-chunks/oidc-token-hash","vendor-chunks/@panva"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute&page=%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fwritings%2F%5BwriteupId%5D%2Froute.ts&appDir=C%3A%5CUsers%5CHimanshu%20Chauhan%5COneDrive%5CDesktop%5Ccreative-app%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CHimanshu%20Chauhan%5COneDrive%5CDesktop%5Ccreative-app&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();